# Inventory
item replace entity @s[scores={time3=..0}] hotbar.0 with carrot_on_a_stick{display:{Name:'{"text":"Blade of Daybreak","color":"#FFD500","bold":true}',Lore:['{"text":"Ability: Blessing of the Sun","color":"#FFDF94"}','{"text":"Cooldown: 15 seconds","color":"#FFDF94"}','{"text":"Damage: 0","color":"#FFDF94"}','{"text":"------------------","color":"#FFDF94"}','{"text":"Imbue yourself with solar magic, gaining a shield (4 hearts) and speed boost for 7 seconds.","color":"#FFDF94"}']},HideFlags:4,Unbreakable:1b,ability:1b,CustomModelData:1051,duelist1:1b,AttributeModifiers:[{AttributeName:"generic.attack_damage",Name:"generic.attack_damage",Amount:3,Operation:0,UUID:[I;1499484758,-203865564,-2141723435,-335912141],Slot:"mainhand"},{AttributeName:"generic.attack_speed",Name:"generic.attack_speed",Amount:100,Operation:0,UUID:[I;493387702,1023298177,-1978029711,-1423751435],Slot:"mainhand"}]} 1

item replace entity @s[scores={time3=..0}] hotbar.1 with carrot_on_a_stick{display:{Name:'{"text":"Blade of Daybreak","color":"#FFD500","bold":true}',Lore:['{"text":"Ability: Blackbody Parry","color":"#FFDF94"}','{"text":"Cooldown: 15 seconds","color":"#FFDF94"}','{"text":"Damage: 2 Hearts","color":"#FFDF94"}','{"text":"------------------","color":"#FFDF94"}','{"text":"Become immobile and invulnerable for 0.5 seconds; if you take damage during that period,","color":"#FFDF94"}','{"text":"you deal 2 hearts damage to all nearby enemies. If you don\'t take damage, you are slowed and gain mining fatigue.","color":"#FFDF94"}']},HideFlags:4,Unbreakable:1b,ability:1b,CustomModelData:1051,duelist2:1b,AttributeModifiers:[{AttributeName:"generic.attack_damage",Name:"generic.attack_damage",Amount:3,Operation:0,UUID:[I;2147172990,2017610214,-1288500653,160905480],Slot:"mainhand"},{AttributeName:"generic.attack_speed",Name:"generic.attack_speed",Amount:100,Operation:0,UUID:[I;-1496684883,-598716933,-1737460567,1894615205],Slot:"mainhand"}]} 1

item replace entity @s[scores={time3=..0}] hotbar.2 with carrot_on_a_stick{display:{Name:'{"text":"Blade of Daybreak","color":"#FFD500","bold":true}',Lore:['{"text":"Ability: Bleeding Sunlight","color":"#FFDF94"}','{"text":"Cooldown: 35 seconds","color":"#FFDF94"}','{"text":"Damage: 0","color":"#FFDF94"}','{"text":"------------------","color":"#FFDF94"}','{"text":"For 10 seconds, all your attacks deal 1.5x damage.","color":"#FFDF94"}']},HideFlags:4,Unbreakable:1b,ability:1b,CustomModelData:1051,duelist3:1b,AttributeModifiers:[{AttributeName:"generic.attack_damage",Name:"generic.attack_damage",Amount:3,Operation:0,UUID:[I;-1920000553,-1178056885,-1757133075,-1221094419],Slot:"mainhand"},{AttributeName:"generic.attack_speed",Name:"generic.attack_speed",Amount:100,Operation:0,UUID:[I;1041336406,-1464776908,-1098005091,-90942018],Slot:"mainhand"}]} 1




item replace entity @s[scores={time3=1..}] hotbar.0 with carrot_on_a_stick{display:{Name:'{"text":"Blade of Daybreak","color":"#FFD500","bold":true}',Lore:['{"text":"Ability: Blessing of the Sun","color":"#FFDF94"}','{"text":"Cooldown: 15 seconds","color":"#FFDF94"}','{"text":"Damage: 0","color":"#FFDF94"}','{"text":"------------------","color":"#FFDF94"}','{"text":"Imbue yourself with solar magic, gaining a shield (4 hearts) and speed boost for 7 seconds.","color":"#FFDF94"}']},HideFlags:4,Unbreakable:1b,ability:1b,CustomModelData:1051,duelist1:1b,AttributeModifiers:[{AttributeName:"generic.attack_damage",Name:"generic.attack_damage",Amount:4.5,Operation:0,UUID:[I;1499484758,-203865564,-2141723435,-335912141],Slot:"mainhand"},{AttributeName:"generic.attack_speed",Name:"generic.attack_speed",Amount:100,Operation:0,UUID:[I;493387702,1023298177,-1978029711,-1423751435],Slot:"mainhand"}]} 1

item replace entity @s[scores={time3=1..}] hotbar.1 with carrot_on_a_stick{display:{Name:'{"text":"Blade of Daybreak","color":"#FFD500","bold":true}',Lore:['{"text":"Ability: Blackbody Parry","color":"#FFDF94"}','{"text":"Cooldown: 15 seconds","color":"#FFDF94"}','{"text":"Damage: 2 Hearts","color":"#FFDF94"}','{"text":"------------------","color":"#FFDF94"}','{"text":"Become immobile and invulnerable for 0.5 seconds; if you take damage during that period,","color":"#FFDF94"}','{"text":"you deal 2 hearts damage to all nearby enemies. If you don\'t take damage, you are slowed and gain mining fatigue.","color":"#FFDF94"}']},HideFlags:4,Unbreakable:1b,ability:1b,CustomModelData:1051,duelist2:1b,AttributeModifiers:[{AttributeName:"generic.attack_damage",Name:"generic.attack_damage",Amount:4.5,Operation:0,UUID:[I;2147172990,2017610214,-1288500653,160905480],Slot:"mainhand"},{AttributeName:"generic.attack_speed",Name:"generic.attack_speed",Amount:100,Operation:0,UUID:[I;-1496684883,-598716933,-1737460567,1894615205],Slot:"mainhand"}]} 1


item replace entity @s[scores={time3=1..}] hotbar.2 with carrot_on_a_stick{display:{Name:'{"text":"Blade of Daybreak","color":"#FFD500","bold":true}',Lore:['{"text":"Ability: Bleeding Sunlight","color":"#FFDF94"}','{"text":"Cooldown: 35 seconds","color":"#FFDF94"}','{"text":"Damage: 0","color":"#FFDF94"}','{"text":"------------------","color":"#FFDF94"}','{"text":"For 10 seconds, all your attacks deal 1.5x damage.","color":"#FFDF94"}']},HideFlags:4,Unbreakable:1b,ability:1b,CustomModelData:1051,duelist3:1b,AttributeModifiers:[{AttributeName:"generic.attack_damage",Name:"generic.attack_damage",Amount:4.5,Operation:0,UUID:[I;-1920000553,-1178056885,-1757133075,-1221094419],Slot:"mainhand"},{AttributeName:"generic.attack_speed",Name:"generic.attack_speed",Amount:100,Operation:0,UUID:[I;1041336406,-1464776908,-1098005091,-90942018],Slot:"mainhand"}]} 1




item replace entity @s hotbar.8 with carrot_on_a_stick{display:{Name:'{"text":"Passive Ability","color":"#FFD500","bold":true}',Lore:['{"text":"Ability: Sacred Fervour","color":"#FFDF94"}','{"text":"------------------","color":"#FFDF94"}','{"text":"You gain a health boost that corresponds to the amount of players that surround you,","color":"#FFDF94"}','{"text":"Which goes from 13 hearts when 1 on 1, to 7 when surrounded by 5 or more people.","color":"#FFDF94"}']},HideFlags:4,Unbreakable:1b,CustomModelData:1054,clean:1b,AttributeModifiers:[{AttributeName:"generic.attack_damage",Name:"generic.attack_damage",Amount:0,Operation:0,UUID:[I;-1673900732,-406696789,-2084626890,1257201255],Slot:"mainhand"},{AttributeName:"generic.attack_speed",Name:"generic.attack_speed",Amount:0,Operation:0,UUID:[I;1714351060,-715373455,-1521802668,988800198],Slot:"mainhand"}]} 1

# Attributes
attribute @s minecraft:generic.movement_speed base set 0.115

# Ability Text Indicators
title @s[nbt={SelectedItem:{tag:{duelist1:1b}}}] actionbar ["",{"text":"Ability: Blessing of the Sun || Cooldown: ","bold":true},{"score":{"name":"@s","objective":"a1_sec"},"bold":true}]
title @s[nbt={SelectedItem:{tag:{duelist2:1b}}}] actionbar ["",{"text":"Ability: Blackbody Parry || Cooldown: ","bold":true},{"score":{"name":"@s","objective":"a2_sec"},"bold":true},{"text":" seconds","bold":true}]
title @s[nbt={SelectedItem:{tag:{duelist3:1b}}}] actionbar ["",{"text":"Ability: Bleeding Sunlight || Cooldown: ","bold":true},{"score":{"name":"@s","objective":"a3_sec"},"bold":true},{"text":" seconds","bold":true}]
title @s[nbt={SelectedItem:{tag:{clean:1b}}}] actionbar {"text":""}

# Use Abilities
tag @s[scores={right_click=1..}] add use_ability
execute as @s[tag=use_ability,tag=can_use,nbt={SelectedItem:{tag:{duelist1:1b}}},scores={a1_sec=0}] at @s run function raurus:classes/duelist1
execute as @s[tag=use_ability,tag=can_use,nbt={SelectedItem:{tag:{duelist2:1b}}},scores={a2_sec=0}] at @s run function raurus:classes/duelist2
execute as @s[tag=use_ability,tag=can_use,nbt={SelectedItem:{tag:{duelist3:1b}}},scores={a3_sec=0}] at @s run function raurus:classes/duelist3

# Ability Icon Indicators
item replace entity @s[nbt=!{SelectedItem:{tag:{ability:1b}}}] hotbar.5 with air 1
item replace entity @s[nbt={SelectedItem:{tag:{duelist1:1b}}}] hotbar.5 with carrot_on_a_stick{display:{Name:'{"text":"Blessing of the Sun"}'},Unbreakable:1b,CustomModelData:1052,HideFlags:4,Count:1b} 1
item replace entity @s[nbt={SelectedItem:{tag:{duelist2:1b}}}] hotbar.5 with carrot_on_a_stick{display:{Name:'{"text":"Blackbody Parry"}'},Unbreakable:1b,CustomModelData:1053,HideFlags:4} 1
item replace entity @s[nbt={SelectedItem:{tag:{duelist3:1b}}}] hotbar.5 with carrot_on_a_stick{display:{Name:'{"text":"Bleeding Sunlight"}'},Unbreakable:1b,CustomModelData:1055,HideFlags:4} 1

item replace entity @s inventory.18 with carrot_on_a_stick{display:{Name:'{"text":"Blessing of the Sun"}'},Unbreakable:1b,CustomModelData:1052,HideFlags:4} 1
item replace entity @s inventory.19 with carrot_on_a_stick{display:{Name:'{"text":"Blackbody Parry"}'},Unbreakable:1b,CustomModelData:1053,HideFlags:4} 1
item replace entity @s inventory.20 with carrot_on_a_stick{display:{Name:'{"text":"Bleeding Sunlight"}'},Unbreakable:1b,CustomModelData:1055,HideFlags:4} 1

# Ability 2
execute if entity @s[scores={time2=1..}] run function raurus:abilities/duelist2

# Passive Ability
# scoreboard players set @s time 0
# scoreboard players set @s time3 0
# tag @s add duel_mode
# execute if entity @s[team=red] at @a[distance=..15,team=blue] run scoreboard players add @s time 1
# execute if entity @s[team=blue] at @a[distance=..15,team=red] run scoreboard players add @s time 1
# execute if entity @s[team=red] at @a[distance=..15,team=red] run scoreboard players add @s time3 1
# execute if entity @s[team=blue] at @a[distance=..15,team=blue] run scoreboard players add @s time3 1
# scoreboard players operation @s time += @s time3
# execute if entity @s[scores={time=3..}] run tag @s remove duel_mode
# execute if entity @s[scores={time=..1}] run tag @s remove duel_mode
# execute if entity @s[scores={time3=2..}] run tag @s remove duel_mode
# execute if entity @s[tag=duel_mode] run function raurus:abilities/duelist0

# execute if entity @s[tag=duel_mode,tag=!duel_mode2] run function raurus:abilities/duelist0activate
# execute if entity @s[tag=!duel_mode,tag=duel_mode2] run function raurus:abilities/duelist0deactivate


# Ultimate
scoreboard players remove @s[scores={time3=1..}] time3 1
execute if entity @s[scores={time3=1..}] run particle wax_on ~ ~1 ~ 0.6 0.6 0.6 0.2 2 force


# Passive Ability - V2
scoreboard players set @s counter 0
execute at @a[distance=..14] run scoreboard players add @s counter 1
execute if entity @s[scores={counter=1}] run scoreboard players set @s counter 2

execute if score @s time < @s counter run damage @s 4

execute if entity @s[scores={counter=2}] run attribute @s minecraft:generic.max_health base set 26
execute if entity @s[scores={counter=3}] run attribute @s minecraft:generic.max_health base set 22
execute if entity @s[scores={counter=4}] run attribute @s minecraft:generic.max_health base set 18
execute if entity @s[scores={counter=5..}] run attribute @s minecraft:generic.max_health base set 14

execute if score @s time > @s counter run effect give @s instant_health 1 0 true

scoreboard players operation @s time = @s counter
